<html>
    <title> Trailgle</title>

    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <!-- Latest compiled and minified CSS -->

        <link rel="stylesheet" href="/static/static.css">
    </head>
    <style>
        #map {
          height: 400px;
          width: 80%;
         }
    </style>
     <script async defer
     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJ3UAqTqrfEAjaYLv9Gsiuaml5yho1UIM&callback=initMap">
     </script>
    <body>

        <div class="statement">Trails similar to "xxxx" Near "Ithaca, NY"</div>
        <form>
            <!-- {% if  data %}
               <h1>{{output_message}}</h1> 
                {% for d in data %}  
                    
                    <p>{{d}}</p>
                {% endfor %}
            {% endif %}  -->
        </form>
        <form class= "global-filter" method="post">
            <div class="filter-group">
                <div class="desc">Route Type</div>
                <div class="input">
                    <select id="route_type">
                      <option value="Loop">Loop</option>
                      <option value="Out & Back">Out & Back</option>
                      <option value="Point to Point">Point to Point</option>
                    </select>
                </div>
            </div>
            <div class="filter-group">
                <div class="desc">Activities</div>
                <div class="input">
                    <select class="selectpicker">
                        <option value="Snowshoeing">Snowshoeing</option>
                        <option value="Surfing">Surfing</option>
                        <option value="Cross Country Skiing">Cross Country Skiing</option>
                        <option value="Fishing">Fishing</option>
                        <option value="Horseback Riding">Horseback Riding</option>
                        <option value="Scenic Driving">Scenic Driving</option>
                        <option value="Off Road Driving">Off Road Driving</option>
                        <option value="Skiing">Skiing</option>
                        <option value="Paddle Sports">Paddle Sports</option>
                        <option value="Walking">Walking</option>
                        <option value="Hiking">Hiking</option>
                        <option value="Camping">Camping</option>
                        <option value="Mountain Biking">Mountain Biking</option>
                        <option value="Birding">Birding</option>
                        <option value="Trail Running">Trail Running</option>
                        <option value="Backpacking">Backpacking</option>
                        <option value="Road Biking">Road Biking</option>
                        <option value="Rock Climbing">Rock Climbing</option>
                        <option value="Nature Trips">Nature Trips</option>
                    </select>
                </div>
            </div>
            <div class="filter-group">
                <div class="desc">Difficulty</div>
                <div class="input">
                    <input id="difficulty" type="range" min="1" max="7" value="1" step="2" >
                </div>
            </div>
        </form>

        <form class= "global-filter" method="post">
            <div class="filter-group">
                <div class="desc">Distance</div>
                <div class="input">
                    <input id="distance" type="text" name="distance" size="20" value= "{{request.form.distance}}" placeholder="enter distance in miles">
                </div>
            </div>
            <div class="filter-group">
                <div class="desc">Elevation Gain</div>
                <div class="input">
                    <input id="elevation_gain" type="text" name="elevation_gain" size="20" placeholder="enter number in feet">
                </div>
            </div>

            <button type="submit" class="btn btn-info"> filter</button>
        </form>

        <div class="output">
            <ol>
                <li class="sortable">
                    <div class="trail-result-card" style="background-image:linear-gradient(rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.7)), url(https://www.alltrails.com/api/alltrails/photos/11058345/image?size=extra_large&api_key=3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i);background-repeat:no-repeat;background-position:center center;height:100px;width: 900px;">
                        <div class="item">
                            <h3 class="name short">
                                <a href="/trail/us/new-york/taughannock-falls?ref=result-card" style="color:white;">Taughannock Falls </a>
                            </h3>
                            <div class="difficulty-info">
                                <span class="diff easy selected" style="color:white;">EASY</span>
                                <span class="review-count" style="color:white;">(214)</span>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="sortable">
                    <div class="trail-result-card" style="background-image:linear-gradient(rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.7)), url(https://www.alltrails.com/api/alltrails/photos/10235890/image?size=extra_large&api_key=3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i);background-repeat:no-repeat;background-position:center center;height:100px;width: 900px;">
                        <div class="item">
                            <h3 class="name short">
                                <a href="/trail/us/new-york/taughannock-falls?ref=result-card" style="color:white;">Finger Lakes Trail </a>
                            </h3>
                            <div class="difficulty-info">
                                <span class="diff easy selected" style="color:white;">EASY</span>
                                <span class="review-count" style="color:white;">(214)</span>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="sortable">
                    <div class="trail-result-card" style="background-image:linear-gradient(rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.7)), url(https://www.alltrails.com/api/alltrails/photos/11565107/image?size=extra_large&api_key=3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i);background-repeat:no-repeat;background-position:center center;height:100px;width: 900px;">
                        <div class="item">
                            <h3 class="name short">
                                <a href="/trail/us/new-york/taughannock-falls?ref=result-card" style="color:white;">Wells Falls </a>
                            </h3>
                            <div class="difficulty-info">
                                <span class="diff easy selected" style="color:white;">EASY</span>
                                <span class="review-count" style="color:white;">(214)</span>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="sortable">
                    <div class="trail-result-card" style="background-image:linear-gradient(rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.7)), url(https://www.alltrails.com/api/alltrails/photos/11058345/image?size=extra_large&api_key=3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i);background-repeat:no-repeat;background-position:center center;height:100px;width: 900px;">
                        <div class="item">
                            <h3 class="name short">
                                <a href="/trail/us/new-york/taughannock-falls?ref=result-card" style="color:white;">Taughannock Falls </a>
                            </h3>
                            <div class="difficulty-info">
                                <span class="diff easy selected" style="color:white;">EASY</span>
                                <span class="review-count" style="color:white;">(214)</span>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="sortable">
                    <div class="trail-result-card" style="background-image:linear-gradient(rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.7)), url(https://www.alltrails.com/api/alltrails/photos/10235890/image?size=extra_large&api_key=3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i);background-repeat:no-repeat;background-position:center center;height:100px;width: 900px;">
                        <div class="item">
                            <h3 class="name short">
                                <a href="/trail/us/new-york/taughannock-falls?ref=result-card" style="color:white;">Finger Lakes Trail </a>
                            </h3>
                            <div class="difficulty-info">
                                <span class="diff easy selected" style="color:white;">EASY</span>
                                <span class="review-count" style="color:white;">(214)</span>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="sortable">
                    <div class="trail-result-card" style="background-image:linear-gradient(rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.7)), url(https://www.alltrails.com/api/alltrails/photos/11565107/image?size=extra_large&api_key=3p0t5s6b5g4g0e8k3c1j3w7y5c3m4t8i);background-repeat:no-repeat;background-position:center center;height:100px;width: 900px;">
                        <div class="item">
                            <h3 class="name short">
                                <a href="/trail/us/new-york/taughannock-falls?ref=result-card" style="color:white;">Wells Falls </a>
                            </h3>
                            <div class="difficulty-info">
                                <span class="diff easy selected" style="color:white;">EASY</span>
                                <span class="review-count" style="color:white;">(214)</span>
                            </div>
                        </div>
                    </div>
                </li>
            </ol>
        </div>
        <div id="map"></div>
        <script>
            var results = [];
            '{% for d in data %}'  
                results.push('{{d}}');
            '{% endfor %}'
            console.log(results)
      


            // console.log(test);

            // var xhr = new XMLHttpRequest();
            // xhr.open("GET", "pythoncode.py?text=" + '{{ data}}', true);
            // xhr.responseType = "text";
            // xhr.onload = function(e) {
            //     console.log("here")
            //     var arrOfStrings = xhr.response;
            // }
            // // xhr.send();
            // console.log(arrOfStrings);
            function initMap() {
                var styledMapType = new google.maps.StyledMapType(
                    [
                    {elementType: 'geometry', stylers: [{color: '#ebe3cd'}]},
                    {elementType: 'labels.text.fill', stylers: [{color: '#523735'}]},
                    {elementType: 'labels.text.stroke', stylers: [{color: '#f5f1e6'}]},
                    {
                        featureType: 'administrative',
                        elementType: 'geometry.stroke',
                        stylers: [{color: '#c9b2a6'}]
                    },
                    {
                        featureType: 'administrative.land_parcel',
                        elementType: 'geometry.stroke',
                        stylers: [{color: '#dcd2be'}]
                    },
                    {
                        featureType: 'administrative.land_parcel',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#ae9e90'}]
                    },
                    {
                        featureType: 'landscape.natural',
                        elementType: 'geometry',
                        stylers: [{color: '#dfd2ae'}]
                    },
                    {
                        featureType: 'poi',
                        elementType: 'geometry',
                        stylers: [{color: '#dfd2ae'}]
                    },
                    {
                        featureType: 'poi',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#93817c'}]
                    },
                    {
                        featureType: 'poi.park',
                        elementType: 'geometry.fill',
                        stylers: [{color: '#a5b076'}]
                    },
                    {
                        featureType: 'poi.park',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#447530'}]
                    },
                    {
                        featureType: 'road',
                        elementType: 'geometry',
                        stylers: [{color: '#f5f1e6'}]
                    },
                    {
                        featureType: 'road.arterial',
                        elementType: 'geometry',
                        stylers: [{color: '#fdfcf8'}]
                    },
                    {
                        featureType: 'road.highway',
                        elementType: 'geometry',
                        stylers: [{color: '#f8c967'}]
                    },
                    {
                        featureType: 'road.highway',
                        elementType: 'geometry.stroke',
                        stylers: [{color: '#e9bc62'}]
                    },
                    {
                        featureType: 'road.highway.controlled_access',
                        elementType: 'geometry',
                        stylers: [{color: '#e98d58'}]
                    },
                    {
                        featureType: 'road.highway.controlled_access',
                        elementType: 'geometry.stroke',
                        stylers: [{color: '#db8555'}]
                    },
                    {
                        featureType: 'road.local',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#806b63'}]
                    },
                    {
                        featureType: 'transit.line',
                        elementType: 'geometry',
                        stylers: [{color: '#dfd2ae'}]
                    },
                    {
                        featureType: 'transit.line',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#8f7d77'}]
                    },
                    {
                        featureType: 'transit.line',
                        elementType: 'labels.text.stroke',
                        stylers: [{color: '#ebe3cd'}]
                    },
                    {
                        featureType: 'transit.station',
                        elementType: 'geometry',
                        stylers: [{color: '#dfd2ae'}]
                    },
                    {
                        featureType: 'water',
                        elementType: 'geometry.fill',
                        stylers: [{color: '#b9d3c2'}]
                    },
                    {
                        featureType: 'water',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#92998d'}]
                    }
                    ],
                    {name: 'Styled Map'});
    
            // var lng_mean = getMeanByKey(lists, "lng");
            // var lat_mean = getMeanByKey(lists, "lat");
            // console.log(lng_mean);
    
            a = [44.21897, 42.375781];
            b = [-73.56561, -74.12276];
            var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 7,
              center: {lat: (a[0]+a[1])/2, lng:(b[0]+b[1])/2},
              mapTypeControlOptions: {
                mapTypeIds: ['satellite', 'hybrid', 'terrain',
                        'styled_map']
              }
            });
    
            var iconBase = 'http://maps.google.com/mapfiles/kml/paddle/';
            
            // for (var i = 0; i< a.length; i++) {
            a.forEach(function(d, i) {
                var marker = new google.maps.Marker({
                    position: {lat: d, lng: b[i]},
                    icon: iconBase + (i+1) + ".png",
                    map: map
                });
    
                 var contentString = '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
                '<div id="bodyContent">'+
                '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
                'sandstone rock formation in the southern part of the '+
                'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
                'south west of the nearest large town, Alice Springs; 450&#160;km '+
                '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
                'features of the Uluru - Kata Tjuta National Park. Uluru is '+
                'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
                'Aboriginal people of the area. It has many springs, waterholes, '+
                'rock caves and ancient paintings. Uluru is listed as a World '+
                'Heritage Site.</p>'+
                '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
                'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
                '(last visited June 22, 2009).</p>'+
                '</div>'+
                '</div>';
    
                var infowindow = new google.maps.InfoWindow({
                content: contentString
                });
    
    
                marker.addListener('mouseover', function() {
                    infowindow.open(map, marker);
                });
    
                marker.addListener("mouseout", function() {
                    infowindow.close();
                })
            });
            
            map.mapTypes.set('styled_map', styledMapType);
            map.setMapTypeId('styled_map');
          }
        </script>
    </body>

</html>